define([],function(){var a,b=function(){$("#id_module_delivery_key").addClass("form-control").wrap('<div class="input-group">').parent().append('<span class="input-group-btn"><button class="btn btn-default" type="button" id="mdksearch"><i class="fa fa-search"></i></button></span>')},c=function(){$("#mdksearch").on("click",function(a){return a.preventDefault(),$("#searchmodal").modal(),!1})},d=function(){$("#searchmodalinput").on("keyup",function(){a&&clearTimeout(a),a=setTimeout(e,1e3)})},e=function(){var a=$("#searchmodalinput").val();a.length<4||($("#searchresults").html('<div style="text-align: center;"><i class="fa fa-spinner fa-spin"></i></div>'),require(["core/ajax","core/templates","core/notification"],function(a,b,c){var d=a.call([{methodname:"local_connect_search_modules",args:{module_code:$("#searchmodalinput").val()}}]);d[0].done(function(a){var d=[];$.each(a,function(b){d.push(a[b])});var e=b.render("local_connect/addlinktable",{courses:d});e.done(function(a,b){$("#searchresults").html(a),$("#searchresults tr").on("click",function(){var a=$(this).find(".module_delivery_key").text();$("#id_module_delivery_key").val(a),$("#searchmodal").modal("hide")})}),e.fail(c.exception)}),d[0].fail(c.exception)}))};return{init:function(){b(),c(),d()}}});